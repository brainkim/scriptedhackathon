<html>
  <head>
    <style>
.Cell{
    width: 40px;
    height: 40px;
    background-color: red;
    display: table-cell;
    vertical-align: middle;
    border: 5px solid red;
}
.upCell{
     border-top: 5px solid black;
}
.downCell{
     border-bottom: 5px solid black;
}
.leftCell{
     border-left: 5px solid black;
}
.rightCell{
     border-right: 5px solid black;
}
.circle {
	border-radius: 50%;
	width: 30px;
	height: 30px;
    background-color: white;
    margin: 0 auto;
}

    </style>
  </head>
  <body>
    <div id="grid"></div>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>

function coinFlip() {
    return Math.random() < 0.3;
}

function Cell(up, right, down, left) {
    if (!(this instanceof Cell)) {
        return new Cell(up, right, down, left);
    }
    this.up = up;
    this.right = right;
    this.down = down;
    this.left = left;
}

function Maze(width, height) {
    this.width = width;
    this.height = height;
    if (!(this instanceof Maze)) {
        return new Maze(width, height);
    }
    var grid = [];
    for (var i = 0; i < width; i++) {
        var row = [];
        for (var j = 0; j < height; j++) {
            row.push(Cell(coinFlip(), coinFlip(), coinFlip(), coinFlip()));
        }
        grid.push(row);
    }
    this.grid = grid;
    console.log(grid);
    this.player = [0, 0];
}

Maze.prototype = {
    moveUp: function() {
        var playerX = this.player[0];
        var playerY = this.player[1];
        var newPlayerX = playerX - 1;
        if (playerX >= 0) {
            this.player = [newPlayerX, playerY];
        }
    },
    moveDown: function() {
        var playerX = this.player[0];
        var playerY = this.player[1];
        var newPlayerX = playerX - 1;
        if (playerX >= 0) {
            this.player = [newPlayerX, playerY];
        }
    },
    moveLeft: function() {
        var playerX = this.player[0];
        var playerY = this.player[1];
        var newPlayerX = playerX - 1;
        if (playerX >= 0) {
            this.player = [newPlayerX, playerY];
        }
    },
    moveRight: function() {
    }

};



function renderGrid(maze, gridElement) {
    gridElement.empty();
    var player = $("<div></div>");
    player.addClass("circle");
    var grid = maze.grid;
    var playerX = maze.player[0];
    var playerY = maze.player[1];
    for (var i = 0; i < grid.length; i++) {
        var row = grid[i];
        // create a div
        var rowElement = $("<div></div>");
        // append div to $node
        for (var j = 0; j < row.length; j++) {
            // create an inner divid
            var cell = row[j];
            var cellElement = $("<div></div>");
            cellElement.addClass("Cell");
            if (cell.up) {
                cellElement.addClass("upCell");
            }
            if (cell.down) {
                cellElement.addClass("downCell");
            }
            if (cell.left) {
                cellElement.addClass("leftCell");
            }
            if (cell.right) {
                cellElement.addClass("rightCell");
            }
            if (playerX === i && playerY === j) {
                cellElement.append(player);
            }
            rowElement.append(cellElement);
        }
        gridElement.append(rowElement);
    }
}

var maze = Maze(10, 10);
function render() {
    renderGrid(maze, $("#grid"));
}

$(window).keypress( function(event) {
  var key = event.which;
  if (key===119) {
      console.log("up");
      render();
  } else if (key===115) {
      console.log("down");
      render();
  } else if (key===97) {
      console.log("left");
      render();
  } else if (key===100) {
      console.log("right");
      render();
  }
});
render();
  </script>
  </body>
</html>
